# STAR 故事（黄一帆）

> 面试可“2-3 分钟/题”复述；每条包含**背景、挑战、动作、结果、反思**。

---

## 1) 架构优化：云函数 → 直连数据库 API
**S（情境）**：项目最初采用云函数封装所有数据读写，联调频繁、发布慢。  
**T（任务）**：在不影响业务功能的前提下**降低调用链复杂度**、提升迭代效率。  
**A（行动）**：
- 评估安全与权限方案，保留必要的云函数能力；
- 将“低风险、读多写少”的场景迁移为**业务层直连数据库 API**；
- 补充字段级校验、最小权限与操作审计；梳理集合结构与索引；
- 用 feature 分支灰度，逐模块替换并回归测试。  
**R（结果）**：
- 代码路径减少一层，联调与问题定位更直接；
- 新功能从开发到可用的时间缩短（示例：签到统计模块从 1.5 天降至 1 天）；
- 架构清晰度提升，后续同学可快速上手维护。  
**Reflection**：在**教育/演示型**小程序中，直连数据库 + 细粒度权限是收益与成本的良好平衡；若面向生产环境，会进一步引入网关与细粒度鉴权。

---

## 2) 学生端「签到记录」时间线
**S**：早期学生端缺少“可视化记录”，用户对签到状态无感。  
**T**：实现**按时间排序的记录时间线**，包含课程名、时间、类型，支持实时刷新。  
**A**：
- 设计轻量数据模型（分页/增量拉取）与 UI；
- 统一时间格式与时区处理；
- 新记录**自上而下弹出**，并对重复签到做去重；
- 建立测试数据脚本，覆盖“过期、未开始、已签到”等状态。  
**R**：
- 学生端**可见性**与**可用性**显著提升；
- 线上问题定位更高效（记录可作为教师端统计的事实来源）。  
**Reflection**：时间线是“**事实单一来源（SSOT）**”的一部分，便于与统计模块对齐。

---

## 3) 线上签到防挂机：视频 + 题目闯关
**S**：单纯的视频播放无法阻止“挂机”；影响签到有效性。  
**T**：设计**视频 + 随机题目**的闯关方式，确保学生真实参与。  
**A**：
- 将任务状态细分为“未开始/未签到/已签到/已过期”；
- 在**播放进度关键帧**弹出题目，答对才算签到成功；
- 对“失败重试”做时间窗内限次与节流；
- 记录所有尝试，用于教师端**单次统计**。  
**R**：
- 挂机现象明显减少；
- 学生端体验从“被动观看”转为“轻交互闯关”。  
**Reflection**：在课堂教学场景，可与题库/课程目标联动，实现过程性评价。

---

## 4) 团队协作与交接
**S**：多人并行，跨学生端/教师端/数据层，阶段性需要交接。  
**T**：降低沟通成本，保证后续同学能**快速维护**。  
**A**：
- 输出集合结构与接口清单；关键流转画出**时序图**；
- PR 模板（动机/变更点/风险/回滚）；
- 明确“**禁止提交**”的敏感配置策略。  
**R**：
- 新成员 1 天内可完成指定需求；
- 返工/合并冲突减少。  
**Reflection**：小型教学项目也值得用“轻规范”，成本很低、收益很高。
